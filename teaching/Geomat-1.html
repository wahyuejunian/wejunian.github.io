<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Geomatematika I</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap CSS -->
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

  <style>
    #pdfViewer {
      width: 100%;
      height: 80vh;
      overflow: auto;
      background: #222;
      text-align: center;
    }
    canvas {
      margin: 10px auto;
      display: block;
      background: #fff;
    }
    a.open-pdf {
      cursor: pointer;
      color: #12d640;
      font-weight: 600;
    }
    a.open-pdf:hover {
      text-decoration: underline;
    }
  </style>
</head>

<body>

<div class="container mt-4">
  <h2 style="color:#12d640">Geomatematika I</h2>
  <p>Klik setiap pertemuan untuk membuka materi.</p>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Pertemuan</th>
        <th>Topik</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>I</td>
        <td>
          <a class="open-pdf" data-pdf="teaching/WEJ_Pekan%201%20Geomatematika%20I.pdf">
            Pendahuluan
          </a>
        </td>
      </tr>
      <tr>
        <td>II</td>
        <td>
          <a class="open-pdf" data-pdf="teaching/WEJ_Pekan%202%20Geomatematika%20I.pdf">
            Deret (1)
          </a>
        </td>
      </tr>
      <tr>
        <td>III</td>
        <td>
          <a class="open-pdf" data-pdf="teaching/WEJ_Pekan%203%20Geomatematika%20I.pdf">
            Deret (2)
          </a>
        </td>
      </tr>
      <tr>
        <td>IV</td>
        <td>
          <a class="open-pdf" data-pdf="teaching/WEJ_Pekan%204%20Geomatematika%20I.pdf">
            Bilangan Kompleks
          </a>
        </td>
      </tr>
      <tr>
        <td>IX</td>
        <td>
          <a class="open-pdf" data-pdf="teaching/WEJ_Pekan%209%20Geomatematika%20I.pdf">
            Persamaan Diferensial Parsial
          </a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Modal -->
<div class="modal fade" id="pdfModal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Materi Perkuliahan</h5>
        <button class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="pdfViewer"></div>
      </div>
    </div>
  </div>
</div>

<!-- JS -->
<script src="../assets/vendor/jquery/jquery.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc =
  "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";

let currentPDF = null;

document.querySelectorAll('.open-pdf').forEach(link => {
  link.addEventListener('click', function () {
    let url = this.dataset.pdf;
    let viewer = document.getElementById('pdfViewer');
    viewer.innerHTML = "";

    pdfjsLib.getDocument(url).promise.then(pdf => {
      currentPDF = pdf;

      for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
        pdf.getPage(pageNum).then(page => {
          let scale = 1.2;
          let viewport = page.getViewport({ scale: scale });

          let canvas = document.createElement("canvas");
          let context = canvas.getContext("2d");
          canvas.height = viewport.height;
          canvas.width = viewport.width;

          page.render({
            canvasContext: context,
            viewport: viewport
          });

          viewer.appendChild(canvas);
        });
      }
    });

    $('#pdfModal').modal('show');
  });
});
</script>

</body>
</html>
